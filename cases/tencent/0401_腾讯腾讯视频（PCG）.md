# 超强面经 阿里巴巴和腾讯

作者：小学插班生
链接：https://www.nowcoder.com/discuss/397292?type=2&order=3&pos=4&page=1
来源：牛客网

腾讯腾讯视频（PCG）
一面（3小时48分钟）：
你没看错，三个小时，很多记不住了，问的太多太多了，嗓子都哑了
主要是技术栈不太一样，也是不放过我
1、代码测试 三道代码题 ，给90分钟，不过很快就写完了，不允许使用任何库函数和自带的数据结构
（1） 找出第100大的数 [从100万个数中找出最大的前100个数](https://blog.csdn.net/junjunba2689/article/details/82758782)
    用容量为100的小顶堆来实现，遍历元素，比堆顶元素小则抛弃，大则加入堆。最后堆顶元素就是第100大。
（2） 字符串复制函数
（3） 10进制数字转成64进制数，进制符包括0-9 A-Z a-z 和#@
问了快排，递归非递归的实现
2、socket编程，原理
- 略
3、time wait 都设置成0 会怎样？
- 新连接可能会被重发的FIN所影响
- 客户端可能返回的RST也会被服务端认为是发生了错误
4、socket如何断开链接？ tcp挥手
- 四次挥手断开链接
5、java如何编译的，具体细节 [java编译过程（字节码编译和即时编译）](https://www.cnblogs.com/straybirds/p/8513870.html)
- 前端编译，.java文件编译成.class文件
- 后端编译，字节码 编译成 机器码
- AOT、JIT的编译器，略
6、linux问了很多，我不太会，记不住了，这块就问了挺久
7、谈了谈项目，具体用到的地方，谈了很多，消息队列，实现机ji制，如何保证可用？redis原理 zookeeper原理，集群等等
这块问的太深了，崩了，mysql也问了比如分库分表，如何解决数据重复
8、进程如何划分内存
- 对应到Java中就是，略
9、浏览器抓包，解释head中的每部分的意思
- 略
10、get post什么区别？
- get 查询数据
- post 修改数据 
11、cookie干嘛用
- 存储用户数据，一般存储在客户端，提交请求时携带cookie即可确认用户身份。
- 数据存储不安全，也存在跨站攻击，一般我们使用session，但是sessionId也不存储到cookies中，一般存在localStorage。
12、访问百度，对方用负载均衡，大概经过的过程
- dns解析得到ip地址
- 根据负载均衡策略选择一台服务器建立tcp连接
- 发送Http报文
- 服务端解析处理报文并返回http响应
- 客户端收到后解析渲染
- 结束
13、进程间的通信
- 管道，单向。匿名，父子；非匿名，所有。
- 消息队列，双向
- 信号量 + 共享内存，前者用于同步与互斥，后者用于数据通信
14、问了几个问题我没记住，应该是编译原理里的，还问我是不是没有学过编译原理我说是的
- 略
15、对http发送出的数据包，是在网卡中解析还是在内存中解析
- 不同的层解析不同的数据，您说的这个应该是在内存中解析
16、java的数据结构
- 略
17、redis的zset的底层实现
- 跳表
18、100亿的qq号，但是有重复，个数大概就25亿个，剩下的都重复，如何找出它们重复的个数或者找到哪些是重复的，只能在一台机器上操作且要在内存中
- 布隆过滤器
19、进程与线程的关系（估计是看我Linux太菜，还是用java 的 没啥问的了）
- 略
20、还有几个真的记不住了。
- 略
21、技术栈是c++ 和 go，问能接受不，指定回答能
- 略
22、java中的多态如何实现的，为什么就可以多态了呢，编译的时候有什么不同，为什么要重写方法呢？
- todo
23、mysql的引擎区别
- MyISAM：表、无外键、无事物、无mvcc
- InnoDB：行、有外键、有事物、有mvcc
24、mysql的索引 b+树 红黑树
25、红黑树的特点
- 平衡树
- 支持范围查询
- 非叶子节点仅不保存数据，适合文件结构，一次加载到内存中多
26、mysql事务
- ACID
27、mysql可重复读的mvcc 如果多个线程同时修改一行，那最后提交的时候结果是什么？
- 最后一个提交的记录
- 之前提交的可以通过回滚指针访问到
28、mysql数据了过亿，如果快速查找和优化？我这里说的索引和分库分表，分库分表就有展开问，问跪了
- 分库分表，略
29、linux驱动
- 不知道

一些记不住了尽力了
------------------------------------
以为凉了结果没过几小时变成复试了，晚上九点多在做网易的测评，没做完就又来电话了，是pcg的二面

二面（46分钟）
1、项目，这块我白话挺久，阿里hr面的时候hr姐姐给我的建议，怎么回答项目，我好好整理了一番
- todo
2、问我项目的技术怎么容灾，有一顿白话
- 超时，feign,hystrix,ribbon的超时配置
- 隔离，信号量和线程池隔离，一般应该采用线程池隔离
- 限流，网关使用redis实现的令牌桶，来限制请求。hystrix中信号量/线程池/队列满了，就限流，走降级逻辑。
- 熔断，错误达到了阈值，直接走降级
- 降级，执行降级逻辑或者简单返回什么数据
3、用户态和内核态，切换会出现什么问题
- todo
4、epoll
- 对比 select, poll
5、进程间如何通信
- 管道
    - 匿名管道：fork子线程，父子之间可通信
    - 命名管道：无亲源关系也可通信
    - 管道：单向的
- 队列
    - 内核中的队列
- 信号量 + 共享内存
    - 物理地址映射到不同进程的虚拟地址上，无需内核态到用户态的数据拷贝。临界资源需要信号量来保证安全。
6、c++编译的过程大概是什么？
- 预处理阶段
- 编译阶段
- 汇编阶段
- 链接阶段
7、java中的hashMap
- 略
8、b+树 红黑树 实现 和复杂度
- 略
9、好像还有两个问题 ，记不起来了
- 略