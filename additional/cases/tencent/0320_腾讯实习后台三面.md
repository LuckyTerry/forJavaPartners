# 腾讯实习后台三面

作者：薰衣草的等待
链接：https://www.nowcoder.com/discuss/382038
来源：牛客网

不参加几次面试，你永远不知道自己有多菜。
我是一个靠着运气过了前两面的人😪😪😪😪

1. 手写冒泡排序
- 略
2. 手写max函数使用泛型，能够支持Comparator接口，或者说可以支持对对象排序(没写出来)
- 略
3. 线程池的具体应用
- 略
4. 序列化的底层原理
- 序列化是指把对象转换为字节序列的过程，而Java反序列化是指把字节序列恢复为对象的过程
- Java中，
    - 实现了Serializable接口，ObjectOutputStream采用默认的序列化方式，对User对象的非transient的实例变量进行序列化
    - 还定义了 readObject、writeObject 方法，则调用这两个方法完成序列化/反序列化
5. tcp和UDP之间的区别？tcp在设计上有哪些缺陷，有没有思考过？[TCP协议设计的安全隐患与防范对策](https://www.cnblogs.com/d0main/p/6915006.html)
- 区别，略
- 缺陷，也有，比如臭名招著的Dos攻击，发送大量SYN包，服务端为此创建大量的TCP半开连接，消耗了大量CPU和内存资源，造成服务器无法对外提供服务。
6. hashMap底层数据结构？hashmap是数据安全的吗？下面这个方法是线程安全的吗？（下面的方法是我根据他的意思自己写的）
- 数组+链表/红黑树
- 不是数据安全的，在扩容和Put的时候会有有并发安全问题
- 下面这个方法是线程安全的
```
public int method{
......
concurrentHashMap.get();

concurrnetHashMap.put();
.......
}
```
7. CMS的四个阶段？哪些对象是GC ROOT对象，为什么这些对象是GC ROOT对象？(面试官说自己要会分析哪些是GC ROOT对象，我就记住静态对象是GC ROOT 对象了)
- 初始标记、并发标记、重新标记、并发清除
- 静态变量、常量、虚拟机栈引用的对象、本地方法栈引用的对象
8. 什么时候需要在静态方法上加锁，什么时候需要在实例方法上加锁？
- 共享资源是类级别时在静态上枷锁
- 共享资源是对象级别时在实例方法上加锁
9. JVM的安全点知道吗？[JVM-安全点](https://www.jianshu.com/p/228fed39369f)
- 代码执行中的一些特殊位置，当GC发生需要挂起用户线程时，线程会在到达安全点时进行挂起，此外，安全点这里保存了线程上下文的全部信息
10. 讲一讲lock.interrupt是怎么做的？(或者说底层原理)
- todo ???
11. 如何实现一个RPC框架
- todo
12. 线程有哪些状态？
- 略
13. 给了一个场景，具体就是考察分布式事务的几种解决方案。
14. 有没有看过一些开源项目的源码(无)
- 看过，年前在看Discovery，用于灰度路由和灰度发布

上面的大部分问题都没答出来，还有一些感觉没记住，感觉凉的特别彻底，觉得自己都不配去找工作。这个月过得真是煎熬啊

腾讯四面已经挂了
交叉面，问了关于性格家庭背景的问题，技术问题基本没答出来，比如
1. 你如何估计你的项目会使用多大内存
- 会部署一套与线上环境类似的压测环境，设置512M内存开始压测。
- 观察gc信息，包括新生代/老年代的gc次数/时间/gc分代年龄等信息，来判断是否要增大内存。比如fullGc频繁、GC分代年龄变成2岁，那么就应该逐步增大内存
- 另外观察是否发生OOM，如果发生则dump出文件，看是否发生内存泄漏。如果没有内存泄漏，那也应该逐步增大内存。
- 总体思路是，先确定一个初始值，然后观察，并不断修改再试
2. 你如何确定自己项目中应该设置的线程池的数量？怎么去量化这个值？
- 同上，不参照网上的公式
3. 怎么解决tcp粘包问题？说说伪代码怎么写？等等
挂的很彻底，官网显示招聘进度条已经变灰