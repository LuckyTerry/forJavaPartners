# mysql 和redis速记

[答案](../shortanswer/mysql%20和redis速记)

1. 介绍一下mysql
- 一种关系型数据库，在Java企业级开发中非常常用
2. 关系型数据库和非关系型数据库
- 关系型数据库的数据结构是表，由二维表及其之间的关联组成一个完整的数据对象
- 非关系型数据库的数据结构包括：键值对存储，如 redis；列存储，如 Hbase；文档存储，如 MongoDB。
- Sql的话简单，但是不够灵活，性能也差些；NoSql灵活、性能好、易扩展，但是不支持一些复杂功能，比如事物。
2. 存储引擎有哪些 MyISAM 和 InnoDB 区别
- My只支持表级锁，In还支持行级锁，并且默认是行级锁
- My不支持事务和崩溃恢复，In支持
- My不支持外键，In支持
- My不支持MVCC，In支持
3. MySQL-InnoDB-MVCC多版本并发控制
- 快照读的实现。通过 up_limit_id, low_limit_id, tx_current_id, tx_list, pointer 来实现
4. 字符集及校对规则
5. 索引主要结构，InnoDB B+ 查找过程
6. 查询缓存的使用 配置和sql
7. 什么是事务? 事物的四大特性(ACID)
8. 并发事务带来哪些问题?4
9. 事务隔离级别有哪些?MySQL的默认隔离级别是?
10. InnoDB默认隔离级别和sql标准的不同
11. 锁机制与InnoDB锁算法3种
12. 为什么是部分防止幻读, 而不是完全防止?
12. 大表优化
- 数据库分片的两种常见方案
13. 解释一下什么是池化设计思想。什么是数据库连接池?为什么需要数据库连接池?
14. 分布式唯一id
15. 一条SQL语句在MySQL中如何执行的
16. 一条SQL语句执行得很慢的原因有哪些？
17. 为什么优先选择符合存储需要的最小的数据类型
18. TEXT,BLOB 数据类型的使用
19. 尽可能把所有列定义为 NOT NULL？
20. 限制每张表上的索引数量,建议单张表索引不超过 ？个
21.  每个 Innodb 表必须有个主键？
22. 如何选择索引列的顺序？
23. 覆盖索引？
24. 数据库 SQL 开发规范
25. 避免数据类型的隐式转换？
26. 双%号  not in 
27. SELECT *  必须使用 SELECT <字段列表>？*
28. 避免使用子查询，可以把子查询优化为 join 操作 子查询性能差的原因：
29. 避免使用 JOIN 关联太多的表
30.  对应同一列进行 or 判断时，使用 in 代替 or
31. 禁止使用 order by rand() 进行随机排序
32.  WHERE 从句中禁止对列进行函数转换和计算
33. 在明显不会有重复值时使用 UNION ALL 而不是 UNION
34. 拆分复杂的大 SQL 为多个小 SQL
35. 超 100 万行的批量写 (UPDATE,DELETE,INSERT) 操作,要分批多次进行操作
36. 对于大表使用 pt-online-schema-change 修改表结构
37. 回表的概念
38. 最左前缀原则
39. B树和B+树区别
40. Hash索引和 B+树索引优劣分析
42. mysql组件5  2层
43. 查询语句和更新语句
44. binlog  redo log 假设 redo log 处于预提交状态，binglog 也已经写完了，这个时候发生了异常重启会怎么样呢？
45. redis 简介
46. 为什么要用 redis 而不用 map/guava 做缓存?
47. redis 的线程模型
48. redis 和 memcached 有什么区别？
49. 为什么 redis 单线程却能支撑高并发？
50. redis 常见数据结构以及使用场景
51. redis是怎么对过期key进行删除的？
52. redis 内存淘汰机制
53. redis 持久化机制
54. AOF 重写
55. redis 事务 假事务
56. 缓存雪崩和缓存穿透问题解决方案
57. 如何解决 Redis 的并发竞争 Key 问题
58. 如何保证缓存与数据库双写时的数据一致性?
59. RedLock   Redlock为什么不可靠
60. 单副本，主从，哨兵，集群 redis木桶效应


10、数据库的索引有哪几种？为什么要用B+树来做索引？组合索引和几个单个的索引有什么区别？数据库的大表查询优化了解吗？MVCC机制了解不？MVCC机制有什么问题？怎么去解决这个问题？mysql慢语句调优做过吗？说说你是怎么做的？2
 
数据库事务ACID四大特性
 
 
索引的常见实现方式有哪些，有哪些区别?MySQL的存储引擎有哪些，有哪些区别？InnoDB使用的是什么方式实现索引，怎么实现的？说下聚簇索引和非聚簇索引的区别？
 
 
事务有哪些特性？
 
 
什么是索引覆盖？
 
数据库慢查询优化了解哪些？说了很多，面试官说假如这些都已经做好了还是很慢怎么办？最后不清楚问了下面试官，面试官主要想了解数据库分区的知识。


redis了解吗？你说说怎么用redis实现分布式锁？
讲一下分布式锁，基于zookeeper实现和redis实现在性能上有什么差异？
 
 
redis主从机制了解么？怎么实现的？
 
Redis熟悉么，了解哪些数据结构? zset底层怎么实现的?
 
红黑树了解么，时间复杂度?
既然两个数据结构时间复杂度都是O(logN)，zset为什么不用红黑树
 
 
跳表的查询过程是怎么样的，查询和插入的时间复杂度?
 
CAS了解么？还了解其他同步机制么？
